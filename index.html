<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Elon</title>
    <style>
        body {
            text-align: center;
            background-color: #000;
        }
        canvas {
            background: url('https://source.unsplash.com/random/800x600/?space') no-repeat center;
            background-size: cover;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="480" height="640"></canvas>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const elonImg = new Image();
        elonImg.src = "https://i.imgur.com/NhU5Xov.png"; // Голова Илона Маска
        
        let elon = { x: 50, y: 150, width: 40, height: 40, gravity: 0.6, lift: -12, velocity: 0 };
        let pipes = [];
        let frame = 0;
        let score = 0;
        
        function drawElon() {
            ctx.drawImage(elonImg, elon.x, elon.y, elon.width, elon.height);
        }
        
        function updateElon() {
            elon.velocity += elon.gravity;
            elon.y += elon.velocity;
            if (elon.y + elon.height > canvas.height) elon.y = canvas.height - elon.height;
        }
        
        function drawPipes() {
            ctx.fillStyle = "green";
            pipes.forEach(pipe => {
                ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
                ctx.fillRect(pipe.x, pipe.bottom, pipe.width, canvas.height - pipe.bottom);
            });
        }
        
        function updatePipes() {
            if (frame % 90 === 0) {
                let gap = 120;
                let topHeight = Math.random() * (canvas.height / 2);
                pipes.push({ x: canvas.width, width: 40, top: topHeight, bottom: topHeight + gap });
            }
            pipes.forEach(pipe => pipe.x -= 2);
            pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);
        }
        
        function checkCollision() {
            for (let pipe of pipes) {
                if (elon.x < pipe.x + pipe.width && elon.x + elon.width > pipe.x) {
                    if (elon.y < pipe.top || elon.y + elon.height > pipe.bottom) {
                        resetGame();
                    }
                }
            }
        }
        
        function resetGame() {
            elon.y = 150;
            elon.velocity = 0;
            pipes = [];
            score = 0;
            frame = 0;
        }
        
        function drawScore() {
            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.fillText("Score: " + score, 10, 20);
        }
        
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            updateElon();
            updatePipes();
            checkCollision();
            drawElon();
            drawPipes();
            drawScore();
            frame++;
            if (frame % 90 === 0) score++;
            requestAnimationFrame(gameLoop);
        }
        
        document.addEventListener("keydown", () => { elon.velocity = elon.lift; });
        elonImg.onload = gameLoop;
    </script>
</body>
</html>
